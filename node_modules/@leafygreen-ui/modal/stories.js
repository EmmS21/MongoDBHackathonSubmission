import e,{useState as n,useCallback as t}from"react";import{faker as r}from"@faker-js/faker";import{storybookArgTypes as o,storybookExcludedControlParams as a}from"@lg-tools/storybook-utils";import l from"@leafygreen-ui/button";import i from"@leafygreen-ui/code";import c from"@leafygreen-ui/copyable";import{css as s,cx as u}from"@leafygreen-ui/emotion";import{Select as m,OptionGroup as p,Option as f}from"@leafygreen-ui/select";import{breakpoints as d,transitionDuration as g,fontFamilies as y,spacing as h}from"@leafygreen-ui/tokens";import{H3 as b,Body as v,Subtitle as x}from"@leafygreen-ui/typography";import E from"prop-types";import k,{useDarkMode as O,usePopoverContext as w,PortalContextProvider as j,PopoverProvider as C}from"@leafygreen-ui/leafygreen-provider";import{Transition as N}from"react-transition-group";import M from"focus-trap-react";import{useIdAllocator as D,useEscapeKey as S}from"@leafygreen-ui/hooks";import I from"@leafygreen-ui/icon/dist/X";import A from"@leafygreen-ui/icon-button";import P from"@leafygreen-ui/portal";import{transparentize as z}from"polished";import{Theme as L}from"@leafygreen-ui/lib";import{palette as T}from"@leafygreen-ui/palette";function F(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},R.apply(this,arguments)}function V(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function B(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,n)||$(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,n){if(e){if("string"==typeof e)return q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?q(e,n):void 0}}function q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var U;s(U||(U=B(["\n  position: relative;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: right;\n  flex-direction: row-reverse;\n  padding: 24px 35px 35px;\n"])));var W,X,Z,G,J,K,Q,Y,_,ee,ne,te,re,oe,ae,le,ie,ce,se,ue,me,pe,fe,de,ge={Default:"default",Dark:"dark",Light:"light"},ye={Small:"small",Default:"default",Large:"large"},he="".concat(d.Desktop+1,"px"),be=s(W||(W=B(["\n  overflow-y: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  opacity: 0;\n  transition: opacity ","ms ease-in-out;\n"])),g.default),ve=(F(G={},L.Light,s(X||(X=B(["\n    background-color: ",";\n  "])),z(.4,T.black))),F(G,L.Dark,s(Z||(Z=B(["\n    background-color: ",";\n  "])),z(.4,T.gray.dark2))),G),xe=s(J||(J=B(["\n  opacity: 1;\n"]))),Ee=s(K||(K=B(["\n  position: absolute;\n  min-height: 100%;\n  width: 100%;\n  padding: ","px ","px;\n  overflow-y: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),64,18),ke=s(Q||(Q=B(["\n  font-family: ",";\n  transition: transform ","ms ease-in-out,\n    opacity ","ms ease-in-out;\n  margin: auto;\n  max-height: calc(100% - ","px);\n  position: relative;\n  pointer-events: all;\n  transform: translate3d(0, -16px, 0);\n  opacity: 0;\n  border-radius: 24px;\n  padding: 40px 36px;\n  box-shadow: 0px 8px 20px -8px ",";\n\n  &:focus {\n    outline: none;\n  }\n"])),y.default,g.default,g.default,64,z(.4,T.black)),Oe=(F(ee={},L.Light,s(Y||(Y=B(["\n    color: ",";\n    background-color: ",";\n  "])),T.black,T.white)),F(ee,L.Dark,s(_||(_=B(["\n    color: ",";\n    background-color: ",";\n  "])),T.gray.light2,T.black)),ee),we=s(ne||(ne=B(["\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n"]))),je={small:s(te||(te=B(["\n    width: 400px;\n  "]))),default:s(re||(re=B(["\n    width: 600px;\n  "]))),large:s(oe||(oe=B(["\n    width: 720px;\n\n    @media only screen and (min-width: ",") {\n      width: 960px;\n    }\n  "])),he)},Ce=s(ae||(ae=B(["\n  position: absolute;\n  cursor: pointer;\n  // x-icon should be 24px from edge. IconButton is 28x28 and Icon is 16x16\n  // so there's already (28 - 16) / 2 = 6px of spacing. 24 - 6 = 18.\n  right: 18px;\n  top: 18px;\n"]))),Ne=(F(de={},L.Light,(F(se={},ge.Default,s(le||(le=B(["\n      color: ",";\n    "])),T.gray.dark1)),F(se,ge.Dark,s(ie||(ie=B(["\n      color: ",";\n    "])),T.black)),F(se,ge.Light,s(ce||(ce=B(["\n      color: ",";\n    "])),T.gray.light2)),se)),F(de,L.Dark,(F(fe={},ge.Default,s(ue||(ue=B(["\n      color: ",";\n    "])),T.gray.base)),F(fe,ge.Dark,s(me||(me=B(["\n      color: ",";\n    "])),T.black)),F(fe,ge.Light,s(pe||(pe=B(["\n      color: ",";\n    "])),T.gray.light2)),fe)),de),Me=["open","size","setOpen","shouldClose","closeIconColor","darkMode","id","children","className","contentClassName","initialFocus"],De=e.forwardRef((function(r,o){var a=r.open,l=void 0!==a&&a,i=r.size,c=void 0===i?ye.Default:i,s=r.setOpen,m=void 0===s?function(){}:s,p=r.shouldClose,f=void 0===p?function(){return!0}:p,d=r.closeIconColor,g=void 0===d?ge.Default:d,y=r.darkMode,h=r.id,b=r.children,v=r.className,x=r.contentClassName,E=r.initialFocus,C=V(r,Me),z=O(y),L=z.theme,T=z.darkMode,B=e.useRef(null),$=null!=o?o:B,q=H(n(null),2),U=q[0],W=q[1],X=w().isPopoverOpen,Z=t((function(){m&&f()&&m(!1)}),[m,f]),G=D({prefix:"modal",id:h}),J=D({prefix:"modal"});S(Z,{enabled:l&&!X});var K=E?{initialFocus:"#".concat(G," ").concat(E),fallbackFocus:"#".concat(J)}:{fallbackFocus:"#".concat(J)};return e.createElement(N,{in:l,timeout:150,mountOnEnter:!0,unmountOnExit:!0,nodeRef:B},(function(n){return e.createElement(P,null,e.createElement("div",R({},C,{id:G,ref:$,className:u(v,be,ve[L],F({},xe,"entered"===n))}),e.createElement(k,{darkMode:T},e.createElement(M,{active:"entered"===n,focusTrapOptions:K},e.createElement("div",{className:Ee,ref:function(e){return W(e)}},e.createElement("div",{"aria-modal":"true",role:"dialog",tabIndex:-1,className:u(ke,Oe[L],je[c],F({},we,"entered"===n),x)},e.createElement(j,{popover:{portalContainer:U,scrollContainer:U}},b,e.createElement(A,{id:J,onClick:Z,"aria-label":"Close modal",className:u(Ce,Ne[L][g])},e.createElement(I,null)))))))))}))}));De.displayName="ModalView";var Se,Ie,Ae,Pe,ze,Le,Te=e.forwardRef((function(n,t){return e.createElement(C,null,e.createElement(De,R({},n,{ref:t})))}));Te.displayName="Modal",Te.propTypes={open:E.bool,size:E.oneOf(Object.values(ye)),children:E.node,shouldClose:E.func,className:E.string,setOpen:E.func,darkMode:E.bool,closeIconColor:E.oneOf(Object.values(ge))};r.seed(0);var Fe,Re=s(Se||(Se=B(["\n  & > * + * {\n    margin-top: ","px;\n  }\n"])),h[3]),Ve={title:"Components/Modals/Modal",component:Te,argTypes:{darkMode:o.darkMode,size:{options:Object.values(ye),control:"radio"},closeIconColor:{options:Object.values(ge),control:"radio"}},args:{open:!0,className:s(Ie||(Ie=B(["\n      z-index: 1;\n    "]))),children:e.createElement("div",{className:Re},e.createElement(b,null,"Base modal"),e.createElement(v,null,"Modal Content goes here."))},parameters:{default:"LiveExample",controls:{exclude:[].concat((Fe=a,function(e){if(Array.isArray(e))return q(e)}(Fe)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Fe)||$(Fe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["setOpen","shouldClose","children","open"])}}},Be=function(t){var r=H(n(!1),2),o=r[0],a=r[1];return e.createElement("div",null,e.createElement(l,{onClick:function(){return a((function(e){return!e}))}},"Open Modal"),e.createElement(Te,R({},t,{open:o,setOpen:a})))};Be.parameters={chromatic:{disableSnapshot:!0}},Be.args={open:void 0};var He=function(n){return e.createElement("div",{className:s(Ae||(Ae=B(["\n        height: 100vh;\n        min-height: ",";\n      "])),d.Desktop)},e.createElement(Te,n))},$e=He.bind({}),qe=He.bind({});qe.args={darkMode:!0};var Ue=He.bind({});Ue.args={children:e.createElement("div",{className:u(s(Pe||(Pe=B(["\n          height: 200vh;\n        "]))),Re)},e.createElement(x,null,"Modal Content goes here."),r.lorem.paragraphs(24,"\n").split("\n").map((function(n){return e.createElement(v,null,n)})))};var We=function(t){var o=H(n("cat"),2),a=o[0],l=o[1];return e.createElement("div",{className:s(ze||(ze=B(["\n        height: 100vh;\n        min-height: ",";\n      "])),d.Desktop)},e.createElement(Te,t,e.createElement("div",{className:Re},e.createElement(x,null,"Modal Content goes here."),r.lorem.paragraphs(2,"\n").split("\n").map((function(n){return e.createElement(v,null,n)})),e.createElement("div",null,e.createElement(m,{label:"label",size:"small",placeholder:"animals",name:"pets",value:a,onChange:l,usePortal:!0},e.createElement(p,{label:"Common"},e.createElement(f,{value:"dog"},"Dog"),e.createElement(f,{value:"cat"},"Cat"),e.createElement(f,{value:"axolotl"},"Axolotl")))))))};function Xe(n){return e.createElement("div",{className:s(Le||(Le=B(["\n        height: 100vh;\n        min-height: ",";\n      "])),d.Desktop)},e.createElement(Te,n,e.createElement("div",{className:Re},e.createElement("div",null,"Modal Content goes here."),e.createElement(c,null,"Hello world in a modal"),e.createElement(i,{copyable:!0,language:"javascript"},"\n\nconst myVar = 42;\n\nvar myObj = {\n  someProp: ['arr', 'ay'],\n  regex: /([A-Z])w+/\n}\n\nexport default class myClass {\n  constructor(){\n    // access properties\n    this.myProp = false\n  }\n}\n\nfunction greeting(entity) {\n  return `Hello, ${entity}! Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper.`;\n}\n \nconsole.log(greeting('World'));\n\n"))))}export{$e as Basic,Xe as CopyableModal,qe as DarkMode,We as DefaultSelect,Be as LiveExample,Ue as Scroll,Ve as default};
