import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as a,useMemo as l,useContext as i,forwardRef as s}from"react";import{storybookArgTypes as c,storybookExcludedControlParams as d}from"@lg-tools/storybook-utils";import{css as u,cx as p}from"@leafygreen-ui/emotion";import f from"@leafygreen-ui/icon/dist/Beaker";import g,{useDarkMode as m}from"@leafygreen-ui/leafygreen-provider";import h from"lodash/isUndefined";import{usePrevious as b,useIdAllocator as v,useAvailableSpace as y,useForwardedRef as x,useEventListener as E,useViewportSize as w}from"@leafygreen-ui/hooks";import k,{Align as O,Justify as N}from"@leafygreen-ui/popover";import{transparentize as S}from"polished";import{Theme as C,createUniqueClassName as j,isComponentType as _,consoleOnce as D,keyMap as z}from"@leafygreen-ui/lib";import{palette as I}from"@leafygreen-ui/palette";import{isFragment as P}from"react-is";import{transitionDuration as M,spacing as L,fontFamilies as A,fontWeights as T,breakpoints as B,Size as G,typeScales as F,focusRing as H,hoverRing as R,BaseFontSize as V}from"@leafygreen-ui/tokens";import W from"prop-types";import{isComponentGlyph as Z}from"@leafygreen-ui/icon";import K from"@leafygreen-ui/icon/dist/Checkmark";import{descriptionClassName as X,InputOption as q,InputOptionContent as U}from"@leafygreen-ui/input-option";import Y,{Size as $,Variant as J}from"@leafygreen-ui/button";import Q from"@leafygreen-ui/icon/dist/CaretDown";import ee from"@leafygreen-ui/icon/dist/Warning";import{Label as ne,Description as re}from"@leafygreen-ui/typography";function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){ae(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function ae(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},le.apply(this,arguments)}function ie(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function se(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,a,l,i=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(t=a.call(r)).done)&&(i.push(t.value),i.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return i}}(e,n)||ue(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,n){if(e){if("string"==typeof e)return pe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,n):void 0}}function pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var fe,ge,me,he,be,ve,ye,xe,Ee,we,ke,Oe,Ne,Se,Ce,je={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},_e={None:"none",Error:"error"},De={Trigger:"trigger",Option:"option"},ze=n({size:je.Default,open:!1,disabled:!1}),Ie=(ae(fe={},C.Light,{menu:{border:I.gray.light2,shadow:S(.75,I.black)},option:{group:{label:I.gray.dark1},background:{base:I.white,hovered:I.gray.light2,focused:I.blue.light3},text:{base:I.gray.dark3,selected:I.blue.base,disabled:I.gray.base,focused:I.blue.dark2},icon:{base:I.gray.dark1,selected:I.blue.base,disabled:I.gray.base},indicator:{focused:I.blue.base}}}),ae(fe,C.Dark,{menu:{border:I.gray.dark2,shadow:S(.85,"#000000")},option:{group:{label:I.gray.base},background:{base:I.gray.dark3,hovered:I.gray.dark4,focused:I.blue.dark3},text:{base:I.gray.light2,selected:I.gray.light2,disabled:I.gray.base,focused:I.blue.light3},icon:{base:I.gray.base,selected:I.blue.light1,disabled:I.gray.base},indicator:{focused:I.blue.light1}}}),fe),Pe=(ae(ge={},je.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),ae(ge,je.Small,{height:28,text:13,option:{text:13},warningIcon:16}),ae(ge,je.Default,{height:36,text:13,option:{text:13},warningIcon:16}),ae(ge,je.Large,{height:48,text:18,option:{text:16},warningIcon:16}),ge),Me=36,Le=16,Ae={text:16,lineHeight:19},Te={text:16,lineHeight:22},Be={text:16},Ge=j("option"),Fe=u(me||(me=se(["\n  display: flex;\n  width: 100%;\n  outline: none;\n  overflow-wrap: anywhere;\n  transition: background-color ","ms ease-in-out;\n  position: relative;\n  padding: ","px 12px;\n  line-height: inherit;\n\n  &:before {\n    content: '';\n    position: absolute;\n    transform: scaleY(0.3);\n    top: 7px;\n    bottom: 7px;\n    left: 0;\n    right: 0;\n    width: 4px;\n    border-radius: 0px 4px 4px 0px;\n    opacity: 0;\n    transition: all ","ms ease-in-out;\n  }\n\n  ."," {\n    line-height: 16px; // Hardcoding because it does not match a token\n  }\n"])),M.default,L[2],M.default,X),He=u(he||(he=se(["\n  display: flex;\n  align-items: center;\n  font-family: ",";\n"])),A.default),Re=u(be||(be=se(["\n  min-width: 16px;\n"]))),Ve=u(ve||(ve=se(["\n  ."," {\n    &:focus-visible & {\n      color: currentColor;\n    }\n  }\n"])),Ge),We=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function Ze(n){var a,l=n.children,i=n.className,s=n.glyph,c=n.selected,d=n.focused,f=n.disabled,g=n.onClick,h=n.onFocus,v=n.triggerScrollIntoView,y=n.hasGlyphs,x=n.description,E=ie(n,We),w=m().theme,k=Ie[w].option,O=r(null),N=t((function(){if(null==O.current)return null;var e=O.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[O]),S=b(v),C=v&&!S;o((function(){C&&N()}),[N,C]);var j=b(d),_=d&&!j;o((function(){_&&O.current.focus()}),[_]),s&&(Z(s)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var D=s&&Z(s)?e.cloneElement(s,{key:"glyph",className:p(Re,u(ye||(ye=se(["\n              color: ",";\n            "])),k.icon.base),Ve,ae({},u(xe||(xe=se(["\n                color: ",";\n              "])),k.icon.disabled),f),s.props.className)}):void 0,z=c?e.createElement(K,{key:"checkmark",className:p(Re,u(Ee||(Ee=se(["\n          color: ",";\n        "])),k.icon.selected),Ve,ae({},u(we||(we=se(["\n            color: ",";\n          "])),k.icon.disabled),f))}):void 0,I=y?D:z,P=y?z:void 0;return e.createElement(q,le({"aria-label":"string"==typeof l?l:"option"},E,{disabled:f,role:"option",tabIndex:-1,ref:O,className:p(Ge,Fe,(a={},ae(a,u(ke||(ke=se(["\n            &:focus-visible {\n              color: ",";\n              background-color: ",";\n\n              &:before {\n                opacity: 1;\n                transform: scaleY(1);\n                background-color: ",";\n              }\n            }\n          "])),k.text.focused,k.background.focused,k.indicator.focused),!f),ae(a,u(Oe||(Oe=se(["\n            &,\n            & ."," {\n              color: ",";\n            }\n          "])),X,k.text.disabled),f),a),i),onClick:g,onFocus:h,onKeyDown:void 0}),e.createElement(U,{leftGlyph:I,rightGlyph:P,description:x},e.createElement("span",{className:p(He,ae({},u(Ne||(Ne=se(["\n              font-weight: ",";\n            "])),T.bold),c))},l)))}function Ke(e){throw Error("`Option` must be a child of a `Select` instance")}Ze.displayName="Option",Ke.displayName="Option",Ke.propTypes={children:W.node.isRequired,className:W.string,glyph:W.element,value:W.string,disabled:W.bool,description:W.string};var Xe,qe=u(Se||(Se=se(["\n  padding: ","px 0;\n"])),L[2]),Ue=u(Ce||(Ce=se(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),T.bold),Ye=["className","label","children"];function $e(n){var r=n.className,t=n.label,o=n.children,a=ie(n,Ye),l=m().theme,i=Ie[l].option,s=v({prefix:"select-option-group"});return e.createElement("div",le({className:p(qe,r)},a),e.createElement("div",{id:s,className:p(Ue,u(Xe||(Xe=se(["\n            color: ",";\n          "])),i.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":s},o))}function Je(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}$e.displayName="OptionGroup",Je.displayName="OptionGroup",Je.propTypes={children:W.oneOfType([W.element,W.arrayOf(W.oneOfType([W.oneOf([!1,null,void 0,""]),W.element]))]).isRequired,className:W.string,label:W.string.isRequired,disabled:W.bool};var Qe=["children"],en="@media only screen and (max-width: ".concat(B.Tablet,"px) and (hover: none)"),nn="".concat(en," and (pointer: coarse), ").concat(en," and (pointer: none)");function rn(e){return null==e||!1===e||""===e}function tn(n,r){e.Children.forEach(n,(function(e){_(e,"Option")?r(e):_(e,"OptionGroup")?tn(e.props.children,(function(n){return r(n,e)})):P(e)&&tn(e.props.children,r)}))}function on(n,r,t){return e.Children.toArray(n).every((function(e){return _(e,"Option")}))||e.Children.toArray(n).every((function(e){return _(e,"OptionGroup")}))||D.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(_(n,"Option"))return e.createElement(Ze,r(n));if(_(n,"OptionGroup")){var o=n.props,a=o.children,l=ie(o,Qe);return e.createElement($e,le({className:void 0},l),on(a,(function(e){return r(e,n)}),t))}return P(n)?on(n.props.children,r,t):(rn(n)||null==t||t(n),null)}))}function an(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!rn(e)})).join(""):e.props.children?e.props.children.toString():""}function ln(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function sn(e,n,r){return an(e)===r&&!ln(e,n)}function cn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,a=void 0===o?[]:o,i=r(t);return l((function(){return{get current(){return i.current},set current(n){i.current=n,e(n)}}}),[e,i].concat(de(a)))}function dn(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return cn(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var un,pn,fn,gn,mn,hn,bn,vn,yn,xn,En,wn,kn,On,Nn,Sn,Cn,jn,_n,Dn,zn,In,Pn,Mn,Ln,An,Tn,Bn,Gn,Fn=function(e){var n=ce(a(e),2),r=n[0];return cn(n[1],{initialValue:e,deps:[r]})},Hn=j("select-popover"),Rn=L[2],Vn=u(un||(un=se(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),Wn=u(pn||(pn=se(["\n  width: max-content;\n"]))),Zn=function(e,n){var r=Pe[n],t=Ie[e];return p(u(fn||(fn=se(["\n      font-family: ",";\n      font-size: ","px;\n      min-height: ","px;\n      background-color: ",";\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      border: 1px solid ",";\n    "])),A.default,r.option.text,r.height,t.option.background.base,t.menu.shadow,L[2],t.menu.border))},Kn=e.forwardRef((function(n,r){var o=n.children,a=n.id,l=n.referenceElement,s=n.className,c=n.labelId,d=n.dropdownWidthBasis,f=n.usePortal,g=void 0===f||f,b=n.portalContainer,v=n.scrollContainer,x=n.portalClassName,E=n.popoverZIndex,w=n.onEntering,S=n.onEnter,C=n.onEntered,j=n.onExiting,_=n.onExit,D=n.onExited,z=m().theme,I=i(ze),P=I.size,M=I.disabled,L=I.open,A=dn(r,null),T=y(l,Rn),B=h(T)?"unset":"".concat(Math.min(T,274),"px"),G=t((function(e){A.current&&A.current.focus(),e.stopPropagation()}),[A]),F=oe({popoverZIndex:E,onEntering:w,onEnter:S,onEntered:C,onExiting:j,onExit:_,onExited:D},g?{usePortal:g,portalClassName:x,portalContainer:b,scrollContainer:v}:{usePortal:g});return e.createElement(k,le({active:L&&!M,spacing:6,align:O.Bottom,justify:N.Start,adjustOnMutation:!0,className:p(Hn,s,ae({},Wn,d===De.Option)),refEl:l},F),e.createElement("ul",{"aria-labelledby":c,role:"listbox",ref:A,tabIndex:-1,onClick:G,className:p(Vn,Zn(z,P),u(gn||(gn=se(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,nn,Be.text)),id:a},o))}));Kn.displayName="ListMenu";var Xn,qn,Un,Yn,$n,Jn,Qn,er,nr=j("select-menu"),rr=u(mn||(mn=se(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),T.regular),tr=(ae(xn={},G.Default,u(hn||(hn=se(["\n    > *:last-child {\n      padding: 0 12px;\n    }\n  "])))),ae(xn,G.Large,u(bn||(bn=se(["\n    > *:last-child {\n      padding: 0 12px 0 ","px;\n    }\n  "])),L[3])),ae(xn,G.Small,u(vn||(vn=se(["\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),L[2])),ae(xn,G.XSmall,u(yn||(yn=se(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),F.body1.fontSize,F.body1.lineHeight,L[1])),xn),or=(ae(kn={},C.Light,u(En||(En=se(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),I.white,I.gray.dark2)),ae(kn,C.Dark,u(wn||(wn=se(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),I.gray.base,I.gray.dark4,I.gray.light3,I.gray.light1,I.gray.dark4,I.gray.light3)),kn),ar=(ae(Sn={},C.Light,u(On||(On=se(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),H.light.input)),ae(Sn,C.Dark,u(Nn||(Nn=se(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),I.gray.dark4,H.dark.input)),Sn),lr=(ae(_n={},C.Light,u(Cn||(Cn=se(["\n    color: ",";\n  "])),I.gray.dark1)),ae(_n,C.Dark,u(jn||(jn=se(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),I.gray.light1,I.gray.light1)),_n),ir=u(Dn||(Dn=se(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n"]))),sr=(ae(Pn={},C.Light,p(ir,u(zn||(zn=se(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),I.gray.light2,I.gray.base,I.gray.base))),ae(Pn,C.Dark,p(ir,u(In||(In=se(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n        border-color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),I.gray.dark3,I.gray.dark1,I.gray.dark2,I.gray.dark1))),Pn),cr=u(Mn||(Mn=se(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),L[1]),dr=u(Ln||(Ln=se(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),ur=(ae(An={},C.Light,I.red.base),ae(An,C.Dark,I.red.light1),An),pr=(ae(Gn={},C.Light,u(Tn||(Tn=se(["\n    border-color: ",";\n    background-color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: ",";\n    }\n  "])),ur[C.Light],I.white,R.light.red)),ae(Gn,C.Dark,u(Bn||(Bn=se(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),ur[C.Dark],ur[C.Dark],R.dark.red)),Gn),fr=["children","value","text","name","deselected","readOnly","onClose","onOpen","errorMessage","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],gr=e.forwardRef((function(n,r){var o,a,l=n.children,s=n.value,c=n.text,d=n.name,f=n.deselected;n.readOnly;var g=n.onClose,h=n.onOpen,b=n.errorMessage,v=n.state,y=n.baseFontSize,x=n.__INTERNAL__menuButtonSlot__,E=n.__INTERNAL__menuButtonSlotProps__,w=ie(n,fr),k=m().theme,O=i(ze),N=O.open,S=O.size,j=O.disabled,_=dn(r,null),D=Pe[S],z=t((function(){N?g():h(),_.current.focus()}),[g,h,N,_]),I=x||Y,P=x?"":p(rr,or[k],tr[S],ar[k],(ae(o={},lr[k],f),ae(o,sr[k],j),ae(o,pr[k],v===_e.Error&&!!b),ae(o,u(Xn||(Xn=se(["\n              letter-spacing: initial;\n            "]))),S===$.XSmall),o),u(qn||(qn=se(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),nn,Me,Le)),M=null!==(a=w["data-testid"])&&void 0!==a?a:"leafygreen-ui-select-menubutton";return e.createElement(I,le({},w,E,{ref:_,name:d,value:s,disabled:j,onClick:z,variant:J.Default,darkMode:k===C.Dark,rightGlyph:e.createElement(Q,null),size:S,"data-testid":M,className:p(P,ae({},u(Un||(Un=se(["\n              font-size: ","px;\n            "])),y),S===$.Default),null==E?void 0:E.className)}),e.createElement("div",{className:cr},e.createElement("div",{className:p(nr,dr)},c),v===_e.Error&&b&&e.createElement(ee,{role:"presentation",className:u(Yn||(Yn=se(["\n                color: ",";\n              "])),ur[k]),size:D.warningIcon})),l)}));gr.displayName="MenuButton";var mr,hr,br,vr,yr,xr,Er,wr,kr=u($n||($n=se(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),L[1]),Or=u(Jn||(Jn=se(["\n  display: flex;\n  flex-direction: column;\n"]))),Nr=u(Qn||(Qn=se(["\n  font-size: ","px;\n  line-height: ","px;\n"])),F.large.fontSize,F.large.lineHeight),Sr=function(e){var n=e.darkMode,r=e.sizeSet;return u(er||(er=se(["\n  font-family: ",";\n  color: ",";\n  font-size: ","px;\n  margin-top: ","px;\n  padding-left: 2px;\n  transition: color ","ms ease-in-out;\n  transition-delay: ","ms;\n"])),A.default,n?I.red.light1:I.red.base,r.text,L[1],M.faster,M.faster)},Cr=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","state","dropdownWidthBasis","baseFontSize","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],jr=s((function(n,r){var i,s,c,d=n.children,f=n.darkMode,h=n.size,b=void 0===h?je.Default:h,y=n.disabled,k=void 0!==y&&y,O=n.allowDeselect,N=void 0===O||O,S=n.usePortal,C=void 0===S||S,j=n.placeholder,_=void 0===j?"Select":j,D=n.errorMessage,I=void 0===D?"":D,P=n.state,M=void 0===P?_e.None:P,L=n.dropdownWidthBasis,A=void 0===L?De.Trigger:L,T=n.baseFontSize,B=void 0===T?V.Body1:T,G=n.id,F=n["aria-labelledby"],H=n["aria-label"],R=n.className,W=n.label,Z=n.description,K=n.name,X=n.defaultValue,q=n.value,U=n.onChange,Y=n.readOnly,$=n.portalContainer,J=n.scrollContainer,Q=n.portalClassName,ee=n.popoverZIndex,te=n.onEntering,de=n.onEnter,ue=n.onEntered,pe=n.onExiting,fe=n.onExit,ge=n.onExited,me=n.__INTERNAL__menuButtonSlot__,he=ie(n,Cr),be=v({prefix:"select",id:G}),ve=l((function(){return H&&!W?void 0:null!=F?F:"".concat(be,"-label")}),[F,H,W,be]);W||F||H||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var ye=m(f).darkMode,xe="".concat(be,"-description"),Ee="".concat(be,"-menu"),we=ce(a(!1),2),ke=we[0],Oe=we[1],Ne=x(r,null),Se=Fn(null),Ce=v({prefix:"select"}),Ie=Fn(null),Me=Pe[b],Le=l((function(){return{size:b,open:ke,disabled:k}}),[b,ke,k]);o((function(){void 0!==q&&void 0===U&&!0!==Y&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[U,Y,q]);var Be=t((function(){Oe(!0)}),[]),Ge=t((function(){Oe(!1),Se.current.focus()}),[Se]);o((function(){if(ke){var e=function(e){var n=Se.current.contains(e.target)||Ie.current.contains(e.target);Oe(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Ie,Se,ke]);var Fe=l((function(){var e=null;return void 0===q&&void 0!==X&&tn(d,(function(n,r){sn(n,r,X)&&(e=n)})),e}),[d,X,q]),He=ce(a(Fe),2),Re=He[0],Ve=He[1];o((function(){var e;null!==Re&&Ve(null!==(e=function(e,n){var r,t,o,a,l,i,s,c;return tn(e,(function(e){if(e===n)l=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=i)&&void 0!==r||(i=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=s)&&void 0!==t||(s=e)}else if(an(e)===an(n)){var o;null!==(o=c)&&void 0!==o||(c=e)}})),null!==(r=null!==(t=null!==(o=null!==(a=l)&&void 0!==a?a:i)&&void 0!==o?o:s)&&void 0!==t?t:c)&&void 0!==r?r:null}(d,Re))&&void 0!==e?e:Fe)}),[d,Fe,Re]);var We=l((function(){if(void 0!==q){var e=null;return tn(d,(function(n,r){sn(n,r,q)&&(e=n)})),e}return Re}),[d,Re,q]),Ke=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===q&&Ve(e),null==U||U(an(e),n),Ye(void 0),Ge()}),[U,Ge,q]),Xe=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),k||n||(Ke(e,r),Ge())}}),[k,Ge,Ke]),qe=ce(a(),2),Ue=qe[0],Ye=qe[1],$e=l((function(){var e=[];return N&&e.push(null),tn(d,(function(n,r){ln(n,r)||e.push(n)})),e}),[d,N]),Je=t((function(e){void 0!==Ue&&Ke(Ue,e)}),[Ue,Ke]),Qe=t((function(){Ye($e[0])}),[$e]),en=t((function(){Ye($e[$e.length-1])}),[$e]),rn=t((function(){if(void 0===Ue||0===$e.indexOf(Ue))en();else{var e=$e.indexOf(Ue)-1;Ye($e[e])}}),[$e,Ue,en]),cn=t((function(){if(void 0===Ue||$e.indexOf(Ue)===$e.length-1)Qe();else{var e=$e.indexOf(Ue)+1;Ye($e[e])}}),[$e,Ue,Qe]),dn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),k||n||Ye(e)}}),[k]),un=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Ie.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=Se.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case z.Tab:case z.Escape:Ge(),Ye(void 0);break;case z.Enter:case z.Space:ke&&!o&&e.preventDefault(),Je(e);break;case z.ArrowUp:!ke&&o&&Be(),e.preventDefault(),rn();break;case z.ArrowDown:!ke&&o&&Be(),e.preventDefault(),cn()}}}),[Ie,Se,Ge,ke,Je,rn,cn,Be]);E("keydown",un);var pn=w(),fn=l((function(){var e=!1;return tn(d,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[d]),gn=l((function(){return null!==pn&&null!==Ie.current&&void 0===Ue&&ke}),[Ue,Ie,ke,pn]),mn=l((function(){var n=null===We;return e.createElement(Ze,{className:void 0,glyph:void 0,selected:n,focused:null===Ue,disabled:!1,onClick:Xe(null,!1),onFocus:dn(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&gn},_)}),[gn,Ue,Xe,dn,_,We]),hn=l((function(){return on(d,(function(e,n){var r=e===We,t=ln(e,n);return oe(oe({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===Ue,disabled:t,children:e.props.children,hasGlyphs:fn,onClick:Xe(e,t),onFocus:dn(e,t),triggerScrollIntoView:r&&gn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[gn,d,Ue,Xe,dn,fn,We]),bn=oe({popoverZIndex:ee,onEntering:te,onEnter:de,onEntered:ue,onExiting:pe,onExit:fe,onExited:ge},C?{usePortal:C,portalClassName:Q,portalContainer:$,scrollContainer:J}:{usePortal:C});return e.createElement(g,{darkMode:ye},e.createElement("div",{ref:Ne,className:p(Or,R)},(W||Z)&&e.createElement("div",{className:kr},W&&e.createElement(ne,{htmlFor:Ce,id:ve,darkMode:ye,disabled:k,className:p((i={},ae(i,Nr,b===je.Large),ae(i,u(mr||(mr=se(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),B),b===je.Default),i),u(hr||(hr=se(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),u(br||(br=se(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),nn,Ae.text,Ae.lineHeight))},W),Z&&e.createElement(re,{id:xe,darkMode:ye,disabled:k,className:p((s={},ae(s,Nr,b===je.Large),ae(s,u(vr||(vr=se(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),B),b===je.Default),s),u(yr||(yr=se(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),nn,Te.text,Te.lineHeight))},Z)),e.createElement(ze.Provider,{value:Le},e.createElement(gr,le({},he,{id:Ce,ref:Se,name:K,readOnly:Y,value:an(We),text:null!==We?We.props.children:_,deselected:null===We,onOpen:Be,onClose:Ge,"aria-labelledby":ve,"aria-label":W||F?void 0:H,"aria-controls":Ee,"aria-expanded":ke,"aria-describedby":xe,"aria-invalid":M===_e.Error,"aria-disabled":k,errorMessage:I,state:M,baseFontSize:B,__INTERNAL__menuButtonSlot__:me}),e.createElement(Kn,le({labelId:ve,id:Ee,referenceElement:Se,ref:Ie,className:p(ae({},u(xr||(xr=se(["\n                    width: ","px;\n                  "])),null===(c=Se.current)||void 0===c?void 0:c.clientWidth),A===De.Trigger)),dropdownWidthBasis:A},bn),N&&mn,hn))),M===_e.Error&&I&&e.createElement("span",{className:p(Sr({darkMode:ye,sizeSet:Me}),u(Er||(Er=se(["\n                  "," {\n                    font-size: ","px;\n                    line-height: ","px;\n                  }\n                "])),nn,Te.text,Te.lineHeight),ae({},u(wr||(wr=se(["\n                    // Hide error text when menu is open,\n                    // so it doesn't peek around the menu corner\n                    color: transparent;\n                  "]))),ke))},I)))}));jr.displayName="Select",jr.propTypes={label:W.string,"aria-labelledby":W.string,"aria-label":W.string,description:W.string,placeholder:W.string,className:W.string,darkMode:W.bool,size:W.oneOf(Object.values(je)),disabled:W.bool,id:W.string,value:W.string,defaultValue:W.string,onChange:W.func,readOnly:W.bool,errorMessage:W.string,state:W.oneOf(Object.values(_e)),allowDeselect:W.bool,baseFontSize:W.oneOf(Object.values(V)),dropdownWidthBasis:W.oneOf(Object.values(De))};var _r,Dr,zr=["className"],Ir={title:"Components/Select",component:jr,parameters:{default:"LiveExample",controls:{exclude:[].concat(de(d),["children","value"])},generate:{combineArgs:{darkMode:[!1,!0],state:Object.values(_e),size:Object.values(je),disabled:[!1,!0]},args:{className:u(_r||(_r=se(["\n          width: 256px;\n        "])))},decorator:function(n,r){return e.createElement(g,{darkMode:null==r?void 0:r.args.darkMode},e.createElement(n,{glyph:null==r?void 0:r.args.glyph}))}}},args:{placeholder:"Select",disabled:!1,allowDeselect:!1,darkMode:!1,children:[e.createElement(Ke,{key:"long",value:"long",description:"I know a little lorem ipsum"},"Cras mattis consectetur purus sit amet fermentum. Maecenas sed diam eget risus varius blandit sit amet non magna."),e.createElement(Je,{key:"Common",label:"Common"},e.createElement(Ke,{value:"dog"},"Dog"),e.createElement(Ke,{value:"cat"},"Cat")),e.createElement(Je,{key:"Less common",label:"Less common"},e.createElement(Ke,{value:"hamster"},"Hamster"),e.createElement(Ke,{value:"parrot"},"Parrot")),e.createElement(Ke,{key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Ke,{key:"spider",value:"spider",description:"I'm chill, I swear"},"Spider"),e.createElement(Ke,{key:"aardvark",value:"aardvark",disabled:!0,description:"Call me Arthur"},"Aardvark")],usePortal:!0},argTypes:{placeholder:{control:"text"},disabled:{control:"boolean"},label:{control:"text"},description:{control:"text"},defaultValue:{control:"text"},readOnly:{control:"boolean"},errorMessage:{control:"text"},allowDeselect:{control:"boolean"},darkMode:c.darkMode}},Pr=function(n){var r=n.className,t=ie(n,zr);return e.createElement(jr,le({},t,{"data-test":"hello-world",className:p(u(Dr||(Dr=se(["\n        min-width: 200px;\n        max-width: 400px;\n      "]))),r),onChange:function(e){return console.log(e)}}))};Pr.parameters={chromatic:{disableSnapshot:!0}};var Mr=Pr.bind({});Mr.args={children:[e.createElement(Je,{key:"Common",label:"Common"},e.createElement(Ke,{glyph:e.createElement(f,null),value:"dog"},"Dog"),e.createElement(Ke,{glyph:e.createElement(f,null),value:"cat",description:"Bark bark"},"Cat")),e.createElement(Je,{key:"Less common",label:"Less common"},e.createElement(Ke,{glyph:e.createElement(f,null),value:"hamster"},"Hamster"),e.createElement(Ke,{glyph:e.createElement(f,null),value:"parrot"},"Parrot")),e.createElement(Ke,{glyph:e.createElement(f,null),key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Ke,{glyph:e.createElement(f,null),key:"spider",value:"spider",disabled:!0,description:"I'm chill, I swear"},"Spider")]},Mr.parameters={chromatic:{disableSnapshot:!0}};var Lr=Pr.bind({});Lr.args={usePortal:!1},Lr.parameters={chromatic:{disableSnapshot:!0}};var Ar=function(){};export{Ar as Generated,Pr as LiveExample,Lr as NoPortal,Mr as WithIcons,Ir as default};
