import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as i,useMemo as a,useContext as l,forwardRef as s}from"react";import c from"lodash/isUndefined";import{css as d,cx as u}from"@leafygreen-ui/emotion";import{usePrevious as p,useIdAllocator as f,useAvailableSpace as g,useForwardedRef as h,useEventListener as b,useViewportSize as m}from"@leafygreen-ui/hooks";import v,{useDarkMode as y}from"@leafygreen-ui/leafygreen-provider";import x,{Align as w,Justify as E}from"@leafygreen-ui/popover";import{transparentize as O}from"polished";import{Theme as k,createUniqueClassName as N,isComponentType as S,consoleOnce as _,keyMap as j}from"@leafygreen-ui/lib";import{palette as C}from"@leafygreen-ui/palette";import{isFragment as z}from"react-is";import{transitionDuration as D,spacing as I,fontFamilies as P,fontWeights as A,breakpoints as L,Size as T,typeScales as M,focusRing as B,hoverRing as G,BaseFontSize as F}from"@leafygreen-ui/tokens";import R from"prop-types";import{isComponentGlyph as H}from"@leafygreen-ui/icon";import V from"@leafygreen-ui/icon/dist/Checkmark";import{descriptionClassName as W,InputOption as Z,InputOptionContent as K}from"@leafygreen-ui/input-option";import X,{Size as q,Variant as U}from"@leafygreen-ui/button";import Y from"@leafygreen-ui/icon/dist/CaretDown";import $ from"@leafygreen-ui/icon/dist/Warning";import{Label as J,Description as Q}from"@leafygreen-ui/typography";function ee(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ne(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(r),!0).forEach((function(n){re(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function re(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},te.apply(this,arguments)}function oe(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ie(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function ae(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(t=i.call(r)).done)&&(l.push(t.value),l.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||se(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,n){if(e){if("string"==typeof e)return ce(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,n):void 0}}function ce(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var de,ue,pe,fe,ge,he,be,me,ve,ye,xe,we,Ee,Oe,ke,Ne={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},Se={None:"none",Error:"error"},_e={Trigger:"trigger",Option:"option"},je=n({size:Ne.Default,open:!1,disabled:!1}),Ce=(re(de={},k.Light,{menu:{border:C.gray.light2,shadow:O(.75,C.black)},option:{group:{label:C.gray.dark1},background:{base:C.white,hovered:C.gray.light2,focused:C.blue.light3},text:{base:C.gray.dark3,selected:C.blue.base,disabled:C.gray.base,focused:C.blue.dark2},icon:{base:C.gray.dark1,selected:C.blue.base,disabled:C.gray.base},indicator:{focused:C.blue.base}}}),re(de,k.Dark,{menu:{border:C.gray.dark2,shadow:O(.85,"#000000")},option:{group:{label:C.gray.base},background:{base:C.gray.dark3,hovered:C.gray.dark4,focused:C.blue.dark3},text:{base:C.gray.light2,selected:C.gray.light2,disabled:C.gray.base,focused:C.blue.light3},icon:{base:C.gray.base,selected:C.blue.light1,disabled:C.gray.base},indicator:{focused:C.blue.light1}}}),de),ze=(re(ue={},Ne.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),re(ue,Ne.Small,{height:28,text:13,option:{text:13},warningIcon:16}),re(ue,Ne.Default,{height:36,text:13,option:{text:13},warningIcon:16}),re(ue,Ne.Large,{height:48,text:18,option:{text:16},warningIcon:16}),ue),De=36,Ie=16,Pe={text:16,lineHeight:19},Ae={text:16,lineHeight:22},Le={text:16},Te=N("option"),Me=d(pe||(pe=ie(["\n  display: flex;\n  width: 100%;\n  outline: none;\n  overflow-wrap: anywhere;\n  transition: background-color ","ms ease-in-out;\n  position: relative;\n  padding: ","px 12px;\n  line-height: inherit;\n\n  &:before {\n    content: '';\n    position: absolute;\n    transform: scaleY(0.3);\n    top: 7px;\n    bottom: 7px;\n    left: 0;\n    right: 0;\n    width: 4px;\n    border-radius: 0px 4px 4px 0px;\n    opacity: 0;\n    transition: all ","ms ease-in-out;\n  }\n\n  ."," {\n    line-height: 16px; // Hardcoding because it does not match a token\n  }\n"])),D.default,I[2],D.default,W),Be=d(fe||(fe=ie(["\n  display: flex;\n  align-items: center;\n  font-family: ",";\n"])),P.default),Ge=d(ge||(ge=ie(["\n  min-width: 16px;\n"]))),Fe=d(he||(he=ie(["\n  ."," {\n    &:focus-visible & {\n      color: currentColor;\n    }\n  }\n"])),Te),Re=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function He(n){var i,a=n.children,l=n.className,s=n.glyph,c=n.selected,f=n.focused,g=n.disabled,h=n.onClick,b=n.onFocus,m=n.triggerScrollIntoView,v=n.hasGlyphs,x=n.description,w=oe(n,Re),E=y().theme,O=Ce[E].option,k=r(null),N=t((function(){if(null==k.current)return null;var e=k.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[k]),S=p(m),_=m&&!S;o((function(){_&&N()}),[N,_]);var j=p(f),C=f&&!j;o((function(){C&&k.current.focus()}),[C]),s&&(H(s)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var z=s&&H(s)?e.cloneElement(s,{key:"glyph",className:u(Ge,d(be||(be=ie(["\n              color: ",";\n            "])),O.icon.base),Fe,re({},d(me||(me=ie(["\n                color: ",";\n              "])),O.icon.disabled),g),s.props.className)}):void 0,D=c?e.createElement(V,{key:"checkmark",className:u(Ge,d(ve||(ve=ie(["\n          color: ",";\n        "])),O.icon.selected),Fe,re({},d(ye||(ye=ie(["\n            color: ",";\n          "])),O.icon.disabled),g))}):void 0,I=v?z:D,P=v?D:void 0;return e.createElement(Z,te({"aria-label":"string"==typeof a?a:"option"},w,{disabled:g,role:"option",tabIndex:-1,ref:k,className:u(Te,Me,(i={},re(i,d(xe||(xe=ie(["\n            &:focus-visible {\n              color: ",";\n              background-color: ",";\n\n              &:before {\n                opacity: 1;\n                transform: scaleY(1);\n                background-color: ",";\n              }\n            }\n          "])),O.text.focused,O.background.focused,O.indicator.focused),!g),re(i,d(we||(we=ie(["\n            &,\n            & ."," {\n              color: ",";\n            }\n          "])),W,O.text.disabled),g),i),l),onClick:h,onFocus:b,onKeyDown:void 0}),e.createElement(K,{leftGlyph:I,rightGlyph:P,description:x},e.createElement("span",{className:u(Be,re({},d(Ee||(Ee=ie(["\n              font-weight: ",";\n            "])),A.bold),c))},a)))}function Ve(e){throw Error("`Option` must be a child of a `Select` instance")}He.displayName="Option",Ve.displayName="Option",Ve.propTypes={children:R.node.isRequired,className:R.string,glyph:R.element,value:R.string,disabled:R.bool,description:R.string};var We,Ze=d(Oe||(Oe=ie(["\n  padding: ","px 0;\n"])),I[2]),Ke=d(ke||(ke=ie(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),A.bold),Xe=["className","label","children"];function qe(n){var r=n.className,t=n.label,o=n.children,i=oe(n,Xe),a=y().theme,l=Ce[a].option,s=f({prefix:"select-option-group"});return e.createElement("div",te({className:u(Ze,r)},i),e.createElement("div",{id:s,className:u(Ke,d(We||(We=ie(["\n            color: ",";\n          "])),l.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":s},o))}function Ue(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}qe.displayName="OptionGroup",Ue.displayName="OptionGroup",Ue.propTypes={children:R.oneOfType([R.element,R.arrayOf(R.oneOfType([R.oneOf([!1,null,void 0,""]),R.element]))]).isRequired,className:R.string,label:R.string.isRequired,disabled:R.bool};var Ye=["children"],$e="@media only screen and (max-width: ".concat(L.Tablet,"px) and (hover: none)"),Je="".concat($e," and (pointer: coarse), ").concat($e," and (pointer: none)");function Qe(e){return null==e||!1===e||""===e}function en(n,r){e.Children.forEach(n,(function(e){S(e,"Option")?r(e):S(e,"OptionGroup")?en(e.props.children,(function(n){return r(n,e)})):z(e)&&en(e.props.children,r)}))}function nn(n,r,t){return e.Children.toArray(n).every((function(e){return S(e,"Option")}))||e.Children.toArray(n).every((function(e){return S(e,"OptionGroup")}))||_.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(S(n,"Option"))return e.createElement(He,r(n));if(S(n,"OptionGroup")){var o=n.props,i=o.children,a=oe(o,Ye);return e.createElement(qe,te({className:void 0},a),nn(i,(function(e){return r(e,n)}),t))}return z(n)?nn(n.props.children,r,t):(Qe(n)||null==t||t(n),null)}))}function rn(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!Qe(e)})).join(""):e.props.children?e.props.children.toString():""}function tn(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function on(e,n,r){return rn(e)===r&&!tn(e,n)}function an(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,i=void 0===o?[]:o,l=r(t);return a((function(){return{get current(){return l.current},set current(n){l.current=n,e(n)}}}),[e,l].concat(le(i)))}function ln(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return an(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var sn,cn,dn,un,pn,fn,gn,hn,bn,mn,vn,yn,xn,wn,En,On,kn,Nn,Sn,_n,jn,Cn,zn,Dn,In,Pn,An,Ln,Tn,Mn=function(e){var n=ae(i(e),2),r=n[0];return an(n[1],{initialValue:e,deps:[r]})},Bn=N("select-popover"),Gn=I[2],Fn=d(sn||(sn=ie(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),Rn=d(cn||(cn=ie(["\n  width: max-content;\n"]))),Hn=function(e,n){var r=ze[n],t=Ce[e];return u(d(dn||(dn=ie(["\n      font-family: ",";\n      font-size: ","px;\n      min-height: ","px;\n      background-color: ",";\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      border: 1px solid ",";\n    "])),P.default,r.option.text,r.height,t.option.background.base,t.menu.shadow,I[2],t.menu.border))},Vn=e.forwardRef((function(n,r){var o=n.children,i=n.id,a=n.referenceElement,s=n.className,p=n.labelId,f=n.dropdownWidthBasis,h=n.usePortal,b=void 0===h||h,m=n.portalContainer,v=n.scrollContainer,O=n.portalClassName,k=n.popoverZIndex,N=n.onEntering,S=n.onEnter,_=n.onEntered,j=n.onExiting,C=n.onExit,z=n.onExited,D=y().theme,I=l(je),P=I.size,A=I.disabled,L=I.open,T=ln(r,null),M=g(a,Gn),B=c(M)?"unset":"".concat(Math.min(M,274),"px"),G=t((function(e){T.current&&T.current.focus(),e.stopPropagation()}),[T]),F=ne({popoverZIndex:k,onEntering:N,onEnter:S,onEntered:_,onExiting:j,onExit:C,onExited:z},b?{usePortal:b,portalClassName:O,portalContainer:m,scrollContainer:v}:{usePortal:b});return e.createElement(x,te({active:L&&!A,spacing:6,align:w.Bottom,justify:E.Start,adjustOnMutation:!0,className:u(Bn,s,re({},Rn,f===_e.Option)),refEl:a},F),e.createElement("ul",{"aria-labelledby":p,role:"listbox",ref:T,tabIndex:-1,onClick:G,className:u(Fn,Hn(D,P),d(un||(un=ie(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,Je,Le.text)),id:i},o))}));Vn.displayName="ListMenu";var Wn,Zn,Kn,Xn,qn,Un,Yn,$n,Jn=N("select-menu"),Qn=d(pn||(pn=ie(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),A.regular),er=(re(mn={},T.Default,d(fn||(fn=ie(["\n    > *:last-child {\n      padding: 0 12px;\n    }\n  "])))),re(mn,T.Large,d(gn||(gn=ie(["\n    > *:last-child {\n      padding: 0 12px 0 ","px;\n    }\n  "])),I[3])),re(mn,T.Small,d(hn||(hn=ie(["\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),I[2])),re(mn,T.XSmall,d(bn||(bn=ie(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),M.body1.fontSize,M.body1.lineHeight,I[1])),mn),nr=(re(xn={},k.Light,d(vn||(vn=ie(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),C.white,C.gray.dark2)),re(xn,k.Dark,d(yn||(yn=ie(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),C.gray.base,C.gray.dark4,C.gray.light3,C.gray.light1,C.gray.dark4,C.gray.light3)),xn),rr=(re(On={},k.Light,d(wn||(wn=ie(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),B.light.input)),re(On,k.Dark,d(En||(En=ie(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),C.gray.dark4,B.dark.input)),On),tr=(re(Sn={},k.Light,d(kn||(kn=ie(["\n    color: ",";\n  "])),C.gray.dark1)),re(Sn,k.Dark,d(Nn||(Nn=ie(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),C.gray.light1,C.gray.light1)),Sn),or=d(_n||(_n=ie(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n"]))),ir=(re(zn={},k.Light,u(or,d(jn||(jn=ie(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),C.gray.light2,C.gray.base,C.gray.base))),re(zn,k.Dark,u(or,d(Cn||(Cn=ie(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n        border-color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),C.gray.dark3,C.gray.dark1,C.gray.dark2,C.gray.dark1))),zn),ar=d(Dn||(Dn=ie(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),I[1]),lr=d(In||(In=ie(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),sr=(re(Pn={},k.Light,C.red.base),re(Pn,k.Dark,C.red.light1),Pn),cr=(re(Tn={},k.Light,d(An||(An=ie(["\n    border-color: ",";\n    background-color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: ",";\n    }\n  "])),sr[k.Light],C.white,G.light.red)),re(Tn,k.Dark,d(Ln||(Ln=ie(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),sr[k.Dark],sr[k.Dark],G.dark.red)),Tn),dr=["children","value","text","name","deselected","readOnly","onClose","onOpen","errorMessage","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],ur=e.forwardRef((function(n,r){var o,i,a=n.children,s=n.value,c=n.text,p=n.name,f=n.deselected;n.readOnly;var g=n.onClose,h=n.onOpen,b=n.errorMessage,m=n.state,v=n.baseFontSize,x=n.__INTERNAL__menuButtonSlot__,w=n.__INTERNAL__menuButtonSlotProps__,E=oe(n,dr),O=y().theme,N=l(je),S=N.open,_=N.size,j=N.disabled,C=ln(r,null),z=ze[_],D=t((function(){S?g():h(),C.current.focus()}),[g,h,S,C]),I=x||X,P=x?"":u(Qn,nr[O],er[_],rr[O],(re(o={},tr[O],f),re(o,ir[O],j),re(o,cr[O],m===Se.Error&&!!b),re(o,d(Wn||(Wn=ie(["\n              letter-spacing: initial;\n            "]))),_===q.XSmall),o),d(Zn||(Zn=ie(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),Je,De,Ie)),A=null!==(i=E["data-testid"])&&void 0!==i?i:"leafygreen-ui-select-menubutton";return e.createElement(I,te({},E,w,{ref:C,name:p,value:s,disabled:j,onClick:D,variant:U.Default,darkMode:O===k.Dark,rightGlyph:e.createElement(Y,null),size:_,"data-testid":A,className:u(P,re({},d(Kn||(Kn=ie(["\n              font-size: ","px;\n            "])),v),_===q.Default),null==w?void 0:w.className)}),e.createElement("div",{className:ar},e.createElement("div",{className:u(Jn,lr)},c),m===Se.Error&&b&&e.createElement($,{role:"presentation",className:d(Xn||(Xn=ie(["\n                color: ",";\n              "])),sr[O]),size:z.warningIcon})),a)}));ur.displayName="MenuButton";var pr,fr,gr,hr,br,mr,vr,yr,xr=d(qn||(qn=ie(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),I[1]),wr=d(Un||(Un=ie(["\n  display: flex;\n  flex-direction: column;\n"]))),Er=d(Yn||(Yn=ie(["\n  font-size: ","px;\n  line-height: ","px;\n"])),M.large.fontSize,M.large.lineHeight),Or=function(e){var n=e.darkMode,r=e.sizeSet;return d($n||($n=ie(["\n  font-family: ",";\n  color: ",";\n  font-size: ","px;\n  margin-top: ","px;\n  padding-left: 2px;\n  transition: color ","ms ease-in-out;\n  transition-delay: ","ms;\n"])),P.default,n?C.red.light1:C.red.base,r.text,I[1],D.faster,D.faster)},kr=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","state","dropdownWidthBasis","baseFontSize","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],Nr=s((function(n,r){var l,s,c,p=n.children,g=n.darkMode,x=n.size,w=void 0===x?Ne.Default:x,E=n.disabled,O=void 0!==E&&E,k=n.allowDeselect,N=void 0===k||k,S=n.usePortal,_=void 0===S||S,C=n.placeholder,z=void 0===C?"Select":C,D=n.errorMessage,I=void 0===D?"":D,P=n.state,A=void 0===P?Se.None:P,L=n.dropdownWidthBasis,T=void 0===L?_e.Trigger:L,M=n.baseFontSize,B=void 0===M?F.Body1:M,G=n.id,R=n["aria-labelledby"],H=n["aria-label"],V=n.className,W=n.label,Z=n.description,K=n.name,X=n.defaultValue,q=n.value,U=n.onChange,Y=n.readOnly,$=n.portalContainer,ee=n.scrollContainer,le=n.portalClassName,se=n.popoverZIndex,ce=n.onEntering,de=n.onEnter,ue=n.onEntered,pe=n.onExiting,fe=n.onExit,ge=n.onExited,he=n.__INTERNAL__menuButtonSlot__,be=oe(n,kr),me=f({prefix:"select",id:G}),ve=a((function(){return H&&!W?void 0:null!=R?R:"".concat(me,"-label")}),[R,H,W,me]);W||R||H||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var ye=y(g).darkMode,xe="".concat(me,"-description"),we="".concat(me,"-menu"),Ee=ae(i(!1),2),Oe=Ee[0],ke=Ee[1],Ce=h(r,null),De=Mn(null),Ie=f({prefix:"select"}),Le=Mn(null),Te=ze[w],Me=a((function(){return{size:w,open:Oe,disabled:O}}),[w,Oe,O]);o((function(){void 0!==q&&void 0===U&&!0!==Y&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[U,Y,q]);var Be=t((function(){ke(!0)}),[]),Ge=t((function(){ke(!1),De.current.focus()}),[De]);o((function(){if(Oe){var e=function(e){var n=De.current.contains(e.target)||Le.current.contains(e.target);ke(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Le,De,Oe]);var Fe=a((function(){var e=null;return void 0===q&&void 0!==X&&en(p,(function(n,r){on(n,r,X)&&(e=n)})),e}),[p,X,q]),Re=ae(i(Fe),2),Ve=Re[0],We=Re[1];o((function(){var e;null!==Ve&&We(null!==(e=function(e,n){var r,t,o,i,a,l,s,c;return en(e,(function(e){if(e===n)a=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=l)&&void 0!==r||(l=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=s)&&void 0!==t||(s=e)}else if(rn(e)===rn(n)){var o;null!==(o=c)&&void 0!==o||(c=e)}})),null!==(r=null!==(t=null!==(o=null!==(i=a)&&void 0!==i?i:l)&&void 0!==o?o:s)&&void 0!==t?t:c)&&void 0!==r?r:null}(p,Ve))&&void 0!==e?e:Fe)}),[p,Fe,Ve]);var Ze=a((function(){if(void 0!==q){var e=null;return en(p,(function(n,r){on(n,r,q)&&(e=n)})),e}return Ve}),[p,Ve,q]),Ke=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===q&&We(e),null==U||U(rn(e),n),Ye(void 0),Ge()}),[U,Ge,q]),Xe=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),O||n||(Ke(e,r),Ge())}}),[O,Ge,Ke]),qe=ae(i(),2),Ue=qe[0],Ye=qe[1],$e=a((function(){var e=[];return N&&e.push(null),en(p,(function(n,r){tn(n,r)||e.push(n)})),e}),[p,N]),Qe=t((function(e){void 0!==Ue&&Ke(Ue,e)}),[Ue,Ke]),an=t((function(){Ye($e[0])}),[$e]),ln=t((function(){Ye($e[$e.length-1])}),[$e]),sn=t((function(){if(void 0===Ue||0===$e.indexOf(Ue))ln();else{var e=$e.indexOf(Ue)-1;Ye($e[e])}}),[$e,Ue,ln]),cn=t((function(){if(void 0===Ue||$e.indexOf(Ue)===$e.length-1)an();else{var e=$e.indexOf(Ue)+1;Ye($e[e])}}),[$e,Ue,an]),dn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),O||n||Ye(e)}}),[O]),un=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Le.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=De.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case j.Tab:case j.Escape:Ge(),Ye(void 0);break;case j.Enter:case j.Space:Oe&&!o&&e.preventDefault(),Qe(e);break;case j.ArrowUp:!Oe&&o&&Be(),e.preventDefault(),sn();break;case j.ArrowDown:!Oe&&o&&Be(),e.preventDefault(),cn()}}}),[Le,De,Ge,Oe,Qe,sn,cn,Be]);b("keydown",un);var pn=m(),fn=a((function(){var e=!1;return en(p,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[p]),gn=a((function(){return null!==pn&&null!==Le.current&&void 0===Ue&&Oe}),[Ue,Le,Oe,pn]),hn=a((function(){var n=null===Ze;return e.createElement(He,{className:void 0,glyph:void 0,selected:n,focused:null===Ue,disabled:!1,onClick:Xe(null,!1),onFocus:dn(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&gn},z)}),[gn,Ue,Xe,dn,z,Ze]),bn=a((function(){return nn(p,(function(e,n){var r=e===Ze,t=tn(e,n);return ne(ne({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===Ue,disabled:t,children:e.props.children,hasGlyphs:fn,onClick:Xe(e,t),onFocus:dn(e,t),triggerScrollIntoView:r&&gn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[gn,p,Ue,Xe,dn,fn,Ze]),mn=ne({popoverZIndex:se,onEntering:ce,onEnter:de,onEntered:ue,onExiting:pe,onExit:fe,onExited:ge},_?{usePortal:_,portalClassName:le,portalContainer:$,scrollContainer:ee}:{usePortal:_});return e.createElement(v,{darkMode:ye},e.createElement("div",{ref:Ce,className:u(wr,V)},(W||Z)&&e.createElement("div",{className:xr},W&&e.createElement(J,{htmlFor:Ie,id:ve,darkMode:ye,disabled:O,className:u((l={},re(l,Er,w===Ne.Large),re(l,d(pr||(pr=ie(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),B),w===Ne.Default),l),d(fr||(fr=ie(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),d(gr||(gr=ie(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Je,Pe.text,Pe.lineHeight))},W),Z&&e.createElement(Q,{id:xe,darkMode:ye,disabled:O,className:u((s={},re(s,Er,w===Ne.Large),re(s,d(hr||(hr=ie(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),B),w===Ne.Default),s),d(br||(br=ie(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Je,Ae.text,Ae.lineHeight))},Z)),e.createElement(je.Provider,{value:Me},e.createElement(ur,te({},be,{id:Ie,ref:De,name:K,readOnly:Y,value:rn(Ze),text:null!==Ze?Ze.props.children:z,deselected:null===Ze,onOpen:Be,onClose:Ge,"aria-labelledby":ve,"aria-label":W||R?void 0:H,"aria-controls":we,"aria-expanded":Oe,"aria-describedby":xe,"aria-invalid":A===Se.Error,"aria-disabled":O,errorMessage:I,state:A,baseFontSize:B,__INTERNAL__menuButtonSlot__:he}),e.createElement(Vn,te({labelId:ve,id:we,referenceElement:De,ref:Le,className:u(re({},d(mr||(mr=ie(["\n                    width: ","px;\n                  "])),null===(c=De.current)||void 0===c?void 0:c.clientWidth),T===_e.Trigger)),dropdownWidthBasis:T},mn),N&&hn,bn))),A===Se.Error&&I&&e.createElement("span",{className:u(Or({darkMode:ye,sizeSet:Te}),d(vr||(vr=ie(["\n                  "," {\n                    font-size: ","px;\n                    line-height: ","px;\n                  }\n                "])),Je,Ae.text,Ae.lineHeight),re({},d(yr||(yr=ie(["\n                    // Hide error text when menu is open,\n                    // so it doesn't peek around the menu corner\n                    color: transparent;\n                  "]))),Oe))},I)))}));Nr.displayName="Select",Nr.propTypes={label:R.string,"aria-labelledby":R.string,"aria-label":R.string,description:R.string,placeholder:R.string,className:R.string,darkMode:R.bool,size:R.oneOf(Object.values(Ne)),disabled:R.bool,id:R.string,value:R.string,defaultValue:R.string,onChange:R.func,readOnly:R.bool,errorMessage:R.string,state:R.oneOf(Object.values(Se)),allowDeselect:R.bool,baseFontSize:R.oneOf(Object.values(F)),dropdownWidthBasis:R.oneOf(Object.values(_e))};export{_e as DropdownWidthBasis,Ve as Option,Ue as OptionGroup,Nr as Select,Ne as Size,Se as State,Jn as menuButtonTextClassName,Bn as popoverClassName};
//# sourceMappingURL=index.js.map
