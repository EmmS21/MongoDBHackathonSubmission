"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeLangChainDocumentLoaderDataSource = void 0;
/**
  Create a data source that loads pages from a [Langchain document loader](https://js.langchain.com/docs/modules/data_connection/document_loaders/).
 */
function makeLangChainDocumentLoaderDataSource({ documentLoader, name, metadata, transformLangchainDocumentToPage, }) {
    return {
        name,
        async fetchPages() {
            const documents = await documentLoader.load();
            const pages = [];
            for (const d of documents) {
                const transformedPage = await transformLangchainDocumentToPage(d);
                pages.push({
                    ...transformedPage,
                    sourceName: name,
                    metadata: {
                        ...metadata,
                        ...(transformedPage.metadata ?? {}),
                    },
                });
            }
            return pages;
        },
    };
}
exports.makeLangChainDocumentLoaderDataSource = makeLangChainDocumentLoaderDataSource;
//# sourceMappingURL=LangchainDocumentLoaderDataSource.js.map